// AUTOGENERATED FILE - DO NOT MODIFY!
// This file was generated by Djinni from loader.djinni

@file:Suppress("RedundantCast", "RedundantCallOfConversionMethod", "USELESS_CAST")

package io.openmobilemaps.mapscore.kmp

import kotlin.experimental.ExperimentalObjCName
import kotlin.native.ObjCName
import platform.darwin.NSObject

@OptIn(ExperimentalObjCName::class)
@ObjCName("KMLoaderInterface", exact = true)
actual interface KMLoaderInterface
{

    actual fun loadTexture(url: String, etag: String?): KMTextureLoaderResult

    actual fun loadData(url: String, etag: String?): KMDataLoaderResult

    actual fun loadTextureAsync(url: String, etag: String?): KMFuture<KMTextureLoaderResult>

    actual fun loadDataAsync(url: String, etag: String?): KMFuture<KMDataLoaderResult>

    actual fun cancel(url: String)
}

private class KMLoaderInterfacePlatformWrapper(internal val nativeHandle: MapCoreSharedModule.MCLoaderInterfaceProtocol) : KMLoaderInterface
{

    override fun loadTexture(url: String, etag: String?): KMTextureLoaderResult {
        val result = nativeHandle.loadTexture(url, etag?.let { it })
        return (result as MapCoreSharedModule.MCTextureLoaderResult).asKmp()
    }

    override fun loadData(url: String, etag: String?): KMDataLoaderResult {
        val result = nativeHandle.loadData(url, etag?.let { it })
        return (result as MapCoreSharedModule.MCDataLoaderResult).asKmp()
    }

    override fun loadTextureAsync(url: String, etag: String?): KMFuture<KMTextureLoaderResult> {
        val result = nativeHandle.loadTextureAsync(url, etag?.let { it })
        return (result as MapCoreSharedModule.DJFuture).asKmp()
    }

    override fun loadDataAsync(url: String, etag: String?): KMFuture<KMDataLoaderResult> {
        val result = nativeHandle.loadDataAsync(url, etag?.let { it })
        return (result as MapCoreSharedModule.DJFuture).asKmp()
    }

    override fun cancel(url: String) {
        nativeHandle.cancel(url)
    }
}

private class KMLoaderInterfacePlatformProxy(private val delegate: KMLoaderInterface) : NSObject(), MapCoreSharedModule.MCLoaderInterfaceProtocol
{

    override fun loadTexture(url: String, etag: String?): MapCoreSharedModule.MCTextureLoaderResult {
        val result = delegate.loadTexture(url, etag?.let { (it as String) })
        return result.asPlatform()
    }

    override fun loadData(url: String, etag: String?): MapCoreSharedModule.MCDataLoaderResult {
        val result = delegate.loadData(url, etag?.let { (it as String) })
        return result.asPlatform()
    }

    override fun loadTextureAsync(url: String, etag: String?): MapCoreSharedModule.DJFuture {
        val result = delegate.loadTextureAsync(url, etag?.let { (it as String) })
        return result.asPlatform()
    }

    override fun loadDataAsync(url: String, etag: String?): MapCoreSharedModule.DJFuture {
        val result = delegate.loadDataAsync(url, etag?.let { (it as String) })
        return result.asPlatform()
    }

    override fun cancel(url: String) {
        delegate.cancel(url)
    }
}

internal fun KMLoaderInterface.asPlatform(): MapCoreSharedModule.MCLoaderInterfaceProtocol = when (this) {
    is KMLoaderInterfacePlatformWrapper -> this.nativeHandle
    else -> KMLoaderInterfacePlatformProxy(this)
}
internal fun MapCoreSharedModule.MCLoaderInterfaceProtocol.asKmp(): KMLoaderInterface = KMLoaderInterfacePlatformWrapper(this)
