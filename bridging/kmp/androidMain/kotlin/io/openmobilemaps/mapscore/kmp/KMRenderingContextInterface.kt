// AUTOGENERATED FILE - DO NOT MODIFY!
// This file was generated by Djinni from core.djinni

package io.openmobilemaps.mapscore.kmp

import io.openmobilemaps.mapscore.shared.graphics.RenderingContextInterface

actual interface KMRenderingContextInterface
{

    actual fun onSurfaceCreated()

    actual fun setViewportSize(size: KMVec2I)

    actual fun getViewportSize(): KMVec2I

    actual fun setBackgroundColor(color: KMColor)

    actual fun setCulling(mode: KMRenderingCullMode)

    actual fun setupDrawFrame(vpMatrix: Long, origin: KMVec3D, screenPixelAsRealMeterFactor: Double)

    actual fun preRenderStencilMask()

    actual fun postRenderStencilMask()

    actual fun applyScissorRect(scissorRect: KMRectI?)

    actual fun asOpenGlRenderingContext(): KMOpenGlRenderingContextInterface?
}

private class KMRenderingContextInterfacePlatformWrapper(internal val nativeHandle: RenderingContextInterface) : KMRenderingContextInterface
{

    override fun onSurfaceCreated() {
        nativeHandle.onSurfaceCreated()
    }

    override fun setViewportSize(size: KMVec2I) {
        nativeHandle.setViewportSize(size.asPlatform())
    }

    override fun getViewportSize(): KMVec2I {
        val result = nativeHandle.getViewportSize()
        return (result as io.openmobilemaps.mapscore.shared.graphics.common.Vec2I).asKmp()
    }

    override fun setBackgroundColor(color: KMColor) {
        nativeHandle.setBackgroundColor(color.asPlatform())
    }

    override fun setCulling(mode: KMRenderingCullMode) {
        nativeHandle.setCulling(mode.asPlatform())
    }

    override fun setupDrawFrame(vpMatrix: Long, origin: KMVec3D, screenPixelAsRealMeterFactor: Double) {
        nativeHandle.setupDrawFrame(vpMatrix, origin.asPlatform(), screenPixelAsRealMeterFactor)
    }

    override fun preRenderStencilMask() {
        nativeHandle.preRenderStencilMask()
    }

    override fun postRenderStencilMask() {
        nativeHandle.postRenderStencilMask()
    }

    override fun applyScissorRect(scissorRect: KMRectI?) {
        nativeHandle.applyScissorRect(scissorRect?.let { it.asPlatform() })
    }

    override fun asOpenGlRenderingContext(): KMOpenGlRenderingContextInterface? {
        val result = nativeHandle.asOpenGlRenderingContext()
        return result?.let { (it as io.openmobilemaps.mapscore.shared.graphics.OpenGlRenderingContextInterface).asKmp() }
    }
}

private class KMRenderingContextInterfacePlatformProxy(private val delegate: KMRenderingContextInterface) : RenderingContextInterface()
{

    override fun onSurfaceCreated() {
        delegate.onSurfaceCreated()
    }

    override fun setViewportSize(size: io.openmobilemaps.mapscore.shared.graphics.common.Vec2I) {
        delegate.setViewportSize((size as io.openmobilemaps.mapscore.shared.graphics.common.Vec2I).asKmp())
    }

    override fun getViewportSize(): io.openmobilemaps.mapscore.shared.graphics.common.Vec2I {
        val result = delegate.getViewportSize()
        return result.asPlatform()
    }

    override fun setBackgroundColor(color: io.openmobilemaps.mapscore.shared.graphics.common.Color) {
        delegate.setBackgroundColor((color as io.openmobilemaps.mapscore.shared.graphics.common.Color).asKmp())
    }

    override fun setCulling(mode: io.openmobilemaps.mapscore.shared.graphics.RenderingCullMode) {
        delegate.setCulling((mode as io.openmobilemaps.mapscore.shared.graphics.RenderingCullMode).asKmp())
    }

    override fun setupDrawFrame(vpMatrix: Long, origin: io.openmobilemaps.mapscore.shared.graphics.common.Vec3D, screenPixelAsRealMeterFactor: Double) {
        delegate.setupDrawFrame(vpMatrix, (origin as io.openmobilemaps.mapscore.shared.graphics.common.Vec3D).asKmp(), screenPixelAsRealMeterFactor)
    }

    override fun preRenderStencilMask() {
        delegate.preRenderStencilMask()
    }

    override fun postRenderStencilMask() {
        delegate.postRenderStencilMask()
    }

    override fun applyScissorRect(scissorRect: io.openmobilemaps.mapscore.shared.graphics.common.RectI?) {
        delegate.applyScissorRect(scissorRect?.let { (it as io.openmobilemaps.mapscore.shared.graphics.common.RectI).asKmp() })
    }

    override fun asOpenGlRenderingContext(): io.openmobilemaps.mapscore.shared.graphics.OpenGlRenderingContextInterface? {
        val result = delegate.asOpenGlRenderingContext()
        return result?.let { it.asPlatform() }
    }
}

internal fun KMRenderingContextInterface.asPlatform(): RenderingContextInterface = when (this) {
    is KMRenderingContextInterfacePlatformWrapper -> this.nativeHandle
    else -> KMRenderingContextInterfacePlatformProxy(this)
}
internal fun RenderingContextInterface.asKmp(): KMRenderingContextInterface = KMRenderingContextInterfacePlatformWrapper(this)
