// AUTOGENERATED FILE - DO NOT MODIFY!
// This file was generated by Djinni from core.djinni

@file:Suppress("RedundantCast", "RedundantCallOfConversionMethod", "USELESS_CAST")

package io.openmobilemaps.mapscore.kmp

import kotlin.experimental.ExperimentalObjCName
import kotlin.native.ObjCName
import platform.darwin.NSObject

@OptIn(ExperimentalObjCName::class)
@ObjCName("KMRenderingContextInterface", exact = true)
actual interface KMRenderingContextInterface
{

    actual fun onSurfaceCreated()

    actual fun setViewportSize(size: KMVec2I)

    actual fun getViewportSize(): KMVec2I

    actual fun setBackgroundColor(color: KMColor)

    actual fun setCulling(mode: KMRenderingCullMode)

    actual fun setupDrawFrame(vpMatrix: Long, origin: KMVec3D, screenPixelAsRealMeterFactor: Double)

    actual fun preRenderStencilMask()

    actual fun postRenderStencilMask()

    actual fun applyScissorRect(scissorRect: KMRectI?)

    actual fun asOpenGlRenderingContext(): KMOpenGlRenderingContextInterface?
}

private class KMRenderingContextInterfacePlatformWrapper(internal val nativeHandle: MapCoreSharedModule.MCRenderingContextInterfaceProtocol) : KMRenderingContextInterface
{

    override fun onSurfaceCreated() {
        nativeHandle.onSurfaceCreated()
    }

    override fun setViewportSize(size: KMVec2I) {
        nativeHandle.setViewportSize(size.asPlatform())
    }

    override fun getViewportSize(): KMVec2I {
        val result = nativeHandle.getViewportSize()
        return (result as MapCoreSharedModule.MCVec2I).asKmp()
    }

    override fun setBackgroundColor(color: KMColor) {
        nativeHandle.setBackgroundColor(color.asPlatform())
    }

    override fun setCulling(mode: KMRenderingCullMode) {
        nativeHandle.setCulling(mode.asPlatform())
    }

    override fun setupDrawFrame(vpMatrix: Long, origin: KMVec3D, screenPixelAsRealMeterFactor: Double) {
        nativeHandle.setupDrawFrame(vpMatrix, origin.asPlatform(), screenPixelAsRealMeterFactor)
    }

    override fun preRenderStencilMask() {
        nativeHandle.preRenderStencilMask()
    }

    override fun postRenderStencilMask() {
        nativeHandle.postRenderStencilMask()
    }

    override fun applyScissorRect(scissorRect: KMRectI?) {
        nativeHandle.applyScissorRect(scissorRect?.let { it.asPlatform() })
    }

    override fun asOpenGlRenderingContext(): KMOpenGlRenderingContextInterface? {
        val result = nativeHandle.asOpenGlRenderingContext()
        return result?.let { (it as MapCoreSharedModule.MCOpenGlRenderingContextInterfaceProtocol).asKmp() }
    }
}

private class KMRenderingContextInterfacePlatformProxy(private val delegate: KMRenderingContextInterface) : NSObject(), MapCoreSharedModule.MCRenderingContextInterfaceProtocol
{

    override fun onSurfaceCreated() {
        delegate.onSurfaceCreated()
    }

    override fun setViewportSize(size: MapCoreSharedModule.MCVec2I) {
        delegate.setViewportSize((size as MapCoreSharedModule.MCVec2I).asKmp())
    }

    override fun getViewportSize(): MapCoreSharedModule.MCVec2I {
        val result = delegate.getViewportSize()
        return result.asPlatform()
    }

    override fun setBackgroundColor(color: MapCoreSharedModule.MCColor) {
        delegate.setBackgroundColor((color as MapCoreSharedModule.MCColor).asKmp())
    }

    override fun setCulling(mode: MapCoreSharedModule.MCRenderingCullMode) {
        delegate.setCulling(KMRenderingCullMode.fromPlatform((mode as MapCoreSharedModule.MCRenderingCullMode)))
    }

    override fun setupDrawFrame(vpMatrix: Long, origin: MapCoreSharedModule.MCVec3D, screenPixelAsRealMeterFactor: Double) {
        delegate.setupDrawFrame(vpMatrix, (origin as MapCoreSharedModule.MCVec3D).asKmp(), screenPixelAsRealMeterFactor)
    }

    override fun preRenderStencilMask() {
        delegate.preRenderStencilMask()
    }

    override fun postRenderStencilMask() {
        delegate.postRenderStencilMask()
    }

    override fun applyScissorRect(scissorRect: MapCoreSharedModule.MCRectI?) {
        delegate.applyScissorRect(scissorRect?.let { (it as MapCoreSharedModule.MCRectI).asKmp() })
    }

    override fun asOpenGlRenderingContext(): MapCoreSharedModule.MCOpenGlRenderingContextInterfaceProtocol? {
        val result = delegate.asOpenGlRenderingContext()
        return result?.let { it.asPlatform() }
    }
}

internal fun KMRenderingContextInterface.asPlatform(): MapCoreSharedModule.MCRenderingContextInterfaceProtocol = when (this) {
    is KMRenderingContextInterfacePlatformWrapper -> this.nativeHandle
    else -> KMRenderingContextInterfacePlatformProxy(this)
}
public fun MapCoreSharedModule.MCRenderingContextInterfaceProtocol.asKmp(): KMRenderingContextInterface = KMRenderingContextInterfacePlatformWrapper(this)
