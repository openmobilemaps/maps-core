// AUTOGENERATED FILE - DO NOT MODIFY!
// This file was generated by Djinni from core.djinni

package io.openmobilemaps.mapscore.kmp

import kotlin.experimental.ExperimentalObjCName
import kotlin.native.ObjCName
import platform.darwin.NSObject

@OptIn(ExperimentalObjCName::class)
@ObjCName("KMRenderPassInterface", exact = true)
actual interface KMRenderPassInterface
{

    actual fun getRenderObjects(): ArrayList<KMRenderObjectInterface>

    actual fun addRenderObject(renderObject: KMRenderObjectInterface)

    actual fun getRenderPassConfig(): KMRenderPassConfig

    actual fun getMaskingObject(): KMMaskingObjectInterface?

    actual fun getScissoringRect(): KMRectI?
}

private class KMRenderPassInterfacePlatformWrapper(internal val nativeHandle: MapCoreSharedModule.MCRenderPassInterfaceProtocol) : KMRenderPassInterface
{

    override fun getRenderObjects(): ArrayList<KMRenderObjectInterface> {
        val result = nativeHandle.getRenderObjects()
        return ArrayList(((result as? List<*>)?.map { requireNotNull((it as MapCoreSharedModule.MCRenderObjectInterfaceProtocol)).asKmp() } ?: (0 until (result as platform.Foundation.NSArray).count.toInt()).map { idx -> requireNotNull(((result as platform.Foundation.NSArray).objectAtIndex(idx.toULong()) as MapCoreSharedModule.MCRenderObjectInterfaceProtocol)).asKmp() }))
    }

    override fun addRenderObject(renderObject: KMRenderObjectInterface) {
        nativeHandle.addRenderObject(renderObject.asPlatform())
    }

    override fun getRenderPassConfig(): KMRenderPassConfig {
        val result = nativeHandle.getRenderPassConfig()
        return (result as MapCoreSharedModule.MCRenderPassConfig).asKmp()
    }

    override fun getMaskingObject(): KMMaskingObjectInterface? {
        val result = nativeHandle.getMaskingObject()
        return result?.let { requireNotNull((it as MapCoreSharedModule.MCMaskingObjectInterfaceProtocol)).asKmp() }
    }

    override fun getScissoringRect(): KMRectI? {
        val result = nativeHandle.getScissoringRect()
        return result?.let { (it as MapCoreSharedModule.MCRectI).asKmp() }
    }
}

private class KMRenderPassInterfacePlatformProxy(private val delegate: KMRenderPassInterface) : NSObject(), MapCoreSharedModule.MCRenderPassInterfaceProtocol
{

    override fun getRenderObjects(): List<*> {
        val result = delegate.getRenderObjects()
        return ArrayList(result.map { it.asPlatform() })
    }

    override fun addRenderObject(renderObject: MapCoreSharedModule.MCRenderObjectInterfaceProtocol?) {
        delegate.addRenderObject(requireNotNull((renderObject as MapCoreSharedModule.MCRenderObjectInterfaceProtocol)).asKmp())
    }

    override fun getRenderPassConfig(): MapCoreSharedModule.MCRenderPassConfig {
        val result = delegate.getRenderPassConfig()
        return result.asPlatform()
    }

    override fun getMaskingObject(): MapCoreSharedModule.MCMaskingObjectInterfaceProtocol? {
        val result = delegate.getMaskingObject()
        return result?.let { it.asPlatform() }
    }

    override fun getScissoringRect(): MapCoreSharedModule.MCRectI? {
        val result = delegate.getScissoringRect()
        return result?.let { it.asPlatform() }
    }
}

internal fun KMRenderPassInterface.asPlatform(): MapCoreSharedModule.MCRenderPassInterfaceProtocol = when (this) {
    is KMRenderPassInterfacePlatformWrapper -> this.nativeHandle
    else -> KMRenderPassInterfacePlatformProxy(this)
}
internal fun MapCoreSharedModule.MCRenderPassInterfaceProtocol.asKmp(): KMRenderPassInterface = KMRenderPassInterfacePlatformWrapper(this)
