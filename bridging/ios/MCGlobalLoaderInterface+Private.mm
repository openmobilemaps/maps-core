// AUTOGENERATED FILE - DO NOT MODIFY!
// This file was generated by Djinni from loader.djinni

#import "MCGlobalLoaderInterface+Private.h"
#import "MCGlobalLoaderInterface.h"
#import "DJICppWrapperCache+Private.h"
#import "DJIError.h"
#import "DJIMarshal+Private.h"
#import "Future_objc.hpp"
#import "MCDataLoaderResult+Private.h"
#import "MCFontLoaderInterface+Private.h"
#import "MCLoaderInterface+Private.h"
#import "MCTextureLoaderResult+Private.h"
#include <exception>
#include <stdexcept>
#include <utility>

static_assert(__has_feature(objc_arc), "Djinni requires ARC to be enabled for this file");

@interface MCGlobalLoaderInterface ()

- (id)initWithCpp:(const std::shared_ptr<::GlobalLoaderInterface>&)cppRef;

@end

@implementation MCGlobalLoaderInterface {
    ::djinni::CppProxyCache::Handle<std::shared_ptr<::GlobalLoaderInterface>> _cppRefHandle;
}

- (id)initWithCpp:(const std::shared_ptr<::GlobalLoaderInterface>&)cppRef
{
    if (self = [super init]) {
        _cppRefHandle.assign(cppRef);
    }
    return self;
}

+ (nullable MCGlobalLoaderInterface *)create {
    try {
        auto objcpp_result_ = ::GlobalLoaderInterface::create();
        return ::djinni_generated::GlobalLoaderInterface::fromCpp(objcpp_result_);
    } DJINNI_TRANSLATE_EXCEPTIONS()
}

- (nullable id<MCLoaderInterface>)createLoader {
    try {
        auto objcpp_result_ = _cppRefHandle.get()->createLoader();
        return ::djinni_generated::LoaderInterface::fromCpp(objcpp_result_);
    } DJINNI_TRANSLATE_EXCEPTIONS()
}

- (nullable id<MCFontLoaderInterface>)createFontLoader:(nullable id<MCLoaderInterface>)loader
                                               baseUrl:(nonnull NSString *)baseUrl {
    try {
        auto objcpp_result_ = _cppRefHandle.get()->createFontLoader(::djinni_generated::LoaderInterface::toCpp(loader),
                                                                    ::djinni::String::toCpp(baseUrl));
        return ::djinni_generated::FontLoaderInterface::fromCpp(objcpp_result_);
    } DJINNI_TRANSLATE_EXCEPTIONS()
}

- (void)processLoadRequests {
    try {
        _cppRefHandle.get()->processLoadRequests();
    } DJINNI_TRANSLATE_EXCEPTIONS()
}

- (nonnull DJFuture<MCDataLoaderResult *> *)enqueueDataLoadRequest:(nonnull NSString *)url
                                                              etag:(nullable NSString *)etag {
    try {
        auto objcpp_result_ = _cppRefHandle.get()->enqueueDataLoadRequest(::djinni::String::toCpp(url),
                                                                          ::djinni::Optional<std::optional, ::djinni::String>::toCpp(etag));
        return ::djinni::FutureAdaptor<::djinni_generated::DataLoaderResult>::fromCpp(std::move(objcpp_result_));
    } DJINNI_TRANSLATE_EXCEPTIONS()
}

- (nonnull DJFuture<MCTextureLoaderResult *> *)enqueueTextureLoadRequest:(nonnull NSString *)url
                                                                    etag:(nullable NSString *)etag {
    try {
        auto objcpp_result_ = _cppRefHandle.get()->enqueueTextureLoadRequest(::djinni::String::toCpp(url),
                                                                             ::djinni::Optional<std::optional, ::djinni::String>::toCpp(etag));
        return ::djinni::FutureAdaptor<::djinni_generated::TextureLoaderResult>::fromCpp(std::move(objcpp_result_));
    } DJINNI_TRANSLATE_EXCEPTIONS()
}

- (void)cancel:(nonnull NSString *)url {
    try {
        _cppRefHandle.get()->cancel(::djinni::String::toCpp(url));
    } DJINNI_TRANSLATE_EXCEPTIONS()
}

namespace djinni_generated {

auto GlobalLoaderInterface::toCpp(ObjcType objc) -> CppType
{
    if (!objc) {
        return nullptr;
    }
    return objc->_cppRefHandle.get();
}

auto GlobalLoaderInterface::fromCppOpt(const CppOptType& cpp) -> ObjcType
{
    if (!cpp) {
        return nil;
    }
    return ::djinni::get_cpp_proxy<MCGlobalLoaderInterface>(cpp);
}

} // namespace djinni_generated

@end
