// AUTOGENERATED FILE - DO NOT MODIFY!
// This file was generated by Djinni from core.djinni

@file:Suppress("RedundantCast", "RedundantCallOfConversionMethod", "USELESS_CAST")

package io.openmobilemaps.mapscore.kmp

import kotlin.experimental.ExperimentalObjCName
import kotlin.native.ObjCName
import platform.darwin.NSObject

@OptIn(ExperimentalObjCName::class)
@ObjCName("KMOpenGlRenderingContextInterface", exact = true)
actual interface KMOpenGlRenderingContextInterface
{

    actual fun resume()

    actual fun pause()

    actual fun getCreateRenderTarget(name: String, textureFilter: KMTextureFilterType, clearColor: KMColor, usesDepthStencil: Boolean): KMOpenGlRenderTargetInterface

    actual fun deleteRenderTarget(name: String)

    actual fun getRenderTargets(): ArrayList<KMOpenGlRenderTargetInterface>

    actual fun getProgram(name: String): Int

    actual fun storeProgram(name: String, program: Int)

    actual fun getAspectRatio(): Float

    actual fun getDeltaTimeMs(): Long
}

private class KMOpenGlRenderingContextInterfacePlatformWrapper(internal val nativeHandle: MapCoreSharedModule.MCOpenGlRenderingContextInterfaceProtocol) : KMOpenGlRenderingContextInterface
{

    override fun resume() {
        nativeHandle.resume()
    }

    override fun pause() {
        nativeHandle.pause()
    }

    override fun getCreateRenderTarget(name: String, textureFilter: KMTextureFilterType, clearColor: KMColor, usesDepthStencil: Boolean): KMOpenGlRenderTargetInterface {
        val result = nativeHandle.getCreateRenderTarget(name, textureFilter.asPlatform(), clearColor.asPlatform(), usesDepthStencil)
        return requireNotNull((result as MapCoreSharedModule.MCOpenGlRenderTargetInterfaceProtocol)).asKmp()
    }

    override fun deleteRenderTarget(name: String) {
        nativeHandle.deleteRenderTarget(name)
    }

    override fun getRenderTargets(): ArrayList<KMOpenGlRenderTargetInterface> {
        val result = nativeHandle.getRenderTargets()
        return ArrayList(((result as? List<*>)?.map { requireNotNull((it as MapCoreSharedModule.MCOpenGlRenderTargetInterfaceProtocol)).asKmp() } ?: (0 until (result as platform.Foundation.NSArray).count.toInt()).map { idx -> requireNotNull(((result as platform.Foundation.NSArray).objectAtIndex(idx.toULong()) as MapCoreSharedModule.MCOpenGlRenderTargetInterfaceProtocol)).asKmp() }))
    }

    override fun getProgram(name: String): Int {
        val result = nativeHandle.getProgram(name)
        return result
    }

    override fun storeProgram(name: String, program: Int) {
        nativeHandle.storeProgram(name, program)
    }

    override fun getAspectRatio(): Float {
        val result = nativeHandle.getAspectRatio()
        return result
    }

    override fun getDeltaTimeMs(): Long {
        val result = nativeHandle.getDeltaTimeMs()
        return result
    }
}

private class KMOpenGlRenderingContextInterfacePlatformProxy(private val delegate: KMOpenGlRenderingContextInterface) : NSObject(), MapCoreSharedModule.MCOpenGlRenderingContextInterfaceProtocol
{

    override fun resume() {
        delegate.resume()
    }

    override fun pause() {
        delegate.pause()
    }

    override fun getCreateRenderTarget(name: String, textureFilter: MapCoreSharedModule.MCTextureFilterType, clearColor: MapCoreSharedModule.MCColor, usesDepthStencil: Boolean): MapCoreSharedModule.MCOpenGlRenderTargetInterfaceProtocol? {
        val result = delegate.getCreateRenderTarget(name, KMTextureFilterType.fromPlatform((textureFilter as MapCoreSharedModule.MCTextureFilterType)), (clearColor as MapCoreSharedModule.MCColor).asKmp(), usesDepthStencil)
        return result.asPlatform()
    }

    override fun deleteRenderTarget(name: String) {
        delegate.deleteRenderTarget(name)
    }

    override fun getRenderTargets(): List<*> {
        val result = delegate.getRenderTargets()
        return ArrayList(result.map { it.asPlatform() })
    }

    override fun getProgram(name: String): Int {
        val result = delegate.getProgram(name)
        return result
    }

    override fun storeProgram(name: String, program: Int) {
        delegate.storeProgram(name, program)
    }

    override fun getAspectRatio(): Float {
        val result = delegate.getAspectRatio()
        return result
    }

    override fun getDeltaTimeMs(): Long {
        val result = delegate.getDeltaTimeMs()
        return result
    }
}

internal fun KMOpenGlRenderingContextInterface.asPlatform(): MapCoreSharedModule.MCOpenGlRenderingContextInterfaceProtocol = when (this) {
    is KMOpenGlRenderingContextInterfacePlatformWrapper -> this.nativeHandle
    else -> KMOpenGlRenderingContextInterfacePlatformProxy(this)
}
internal fun MapCoreSharedModule.MCOpenGlRenderingContextInterfaceProtocol.asKmp(): KMOpenGlRenderingContextInterface = KMOpenGlRenderingContextInterfacePlatformWrapper(this)
