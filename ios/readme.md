<h1 align="center">Open Mobile Maps</h1>
<br />
<div align="center">
  <img width="200" height="45" src="../logo.svg" />
  <br />
  <br />
  The lightweight and modern Map SDK for Android (6.0+) and iOS (10+)
  <br />
  <br />
  <a href="https://openmobilemaps.io/">openmobilemaps.io</a>
</div>
<br />
<div align="center">
    <!-- License -->
    <a href="https://github.com/openmobilemaps/maps-core/blob/master/LICENSE">
      <img alt="License: MPL 2.0"
      src="https://img.shields.io/badge/License-MPL%202.0-brightgreen.svg">
    </a>
</div>

<h1>iOS</h1>

## Installation
Open mobile maps is available through [Swift Package Manager](https://swift.org/package-manager/).

### Xcode
For App integration add this package to your App target. To do this, check [Adding Package Dependencies to Your App](https://developer.apple.com/documentation/xcode/adding_package_dependencies_to_your_app) about the step by step tutorial using Xcode.

### Swift Package

Once you have your Swift package set up, adding open mobile maps as a dependency is as easy as adding it to the dependencies value of your Package.swift.
```
dependencies: [
    .package(url: "https://github.com/openmobilemaps/maps-core.git", .branch("develop"))
]
```

## How to use
```
import MapsCore
import MapCoreSharedModule

// create MCMapConfig for epsg3857 coordinate system https://epsg.io/3857
lazy var mapConfig: MCMapConfig = {
  let identifier = MCCoordinateSystemIdentifiers.epsg3857();

  let topLeft = MCCoord(systemIdentifier: identifier,
                        x: -20026376.39,
                        y: 20048966.10, z: 0)
  let bottomRight = MCCoord(systemIdentifier: identifier,
                        x: 20026376.39,
                        y: -20048966.10, z: 0)
  let bounds = MCRectCoord(topLeft: topLeft, bottomRight: bottomRight)
  let coordinateSystem = MCMapCoordinateSystem(identifier: identifier,
                                                bounds: .init(topLeft: topLeft, bottomRight: bottomRight),
                                                unitToScreenMeterFactor: 1)

  return MCMapConfig(mapCoordinateSystem: coordinateSystem,
                     zoomMin: 500_000_000,
                     zoomMax: 1_000)
}()

let view = MCMapView(config: mapConfig)
```

## How to build

Make sure you have all submodules initialized and updated. to do this use
```
git submodule init
git submodule update
```

### Updating Djinni bridging files

The bridging interface between Kotlin and C++ are defined in the djinni files under [djinni](../djinni). After modifying those files the new bridging code can be generated by running

```make clean djinni```

in the folder [djinni](../djinni). This generates the Kotlin bindings, the C++ header files as well as all the Objective C glue code.

### Building the iOS Package.

The [Package.swift](../Package.swift) file can be opened in Xcode and build directly from there. 

## License
This project is licensed under the terms of the MPL 2 license. See the [LICENSE](../LICENSE) file.
