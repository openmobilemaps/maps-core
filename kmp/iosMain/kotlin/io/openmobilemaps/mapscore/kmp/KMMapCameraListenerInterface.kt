// AUTOGENERATED FILE - DO NOT MODIFY!
// This file was generated by Djinni from camera.djinni

@file:Suppress("RedundantCast", "RedundantCallOfConversionMethod", "USELESS_CAST")

package io.openmobilemaps.mapscore.kmp

import kotlin.experimental.ExperimentalObjCName
import kotlin.native.ObjCName
import platform.darwin.NSObject

@OptIn(ExperimentalObjCName::class)
@ObjCName("KMMapCameraListenerInterface", exact = true)
actual interface KMMapCameraListenerInterface
{

    actual fun onVisibleBoundsChanged(visibleBounds: KMRectCoord, zoom: Double)

    actual fun onRotationChanged(angle: Float)

    actual fun onMapInteraction()

    actual fun onCameraChange(viewMatrix: ArrayList<Float>, projectionMatrix: ArrayList<Float>, origin: KMVec3D, verticalFov: Float, horizontalFov: Float, width: Float, height: Float, focusPointAltitude: Float, focusPointPosition: KMCoord, zoom: Float)
}

private class KMMapCameraListenerInterfacePlatformWrapper(internal val nativeHandle: MapCoreSharedModule.MCMapCameraListenerInterfaceProtocol) : KMMapCameraListenerInterface
{

    override fun onVisibleBoundsChanged(visibleBounds: KMRectCoord, zoom: Double) {
        nativeHandle.onVisibleBoundsChanged(visibleBounds.asPlatform(), zoom)
    }

    override fun onRotationChanged(angle: Float) {
        nativeHandle.onRotationChanged(angle)
    }

    override fun onMapInteraction() {
        nativeHandle.onMapInteraction()
    }

    override fun onCameraChange(viewMatrix: ArrayList<Float>, projectionMatrix: ArrayList<Float>, origin: KMVec3D, verticalFov: Float, horizontalFov: Float, width: Float, height: Float, focusPointAltitude: Float, focusPointPosition: KMCoord, zoom: Float) {
        nativeHandle.onCameraChange(ArrayList(viewMatrix.map { platform.Foundation.NSNumber(float = it) }), ArrayList(projectionMatrix.map { platform.Foundation.NSNumber(float = it) }), origin.asPlatform(), verticalFov, horizontalFov, width, height, focusPointAltitude, focusPointPosition.asPlatform(), zoom)
    }
}

private class KMMapCameraListenerInterfacePlatformProxy(private val delegate: KMMapCameraListenerInterface) : NSObject(), MapCoreSharedModule.MCMapCameraListenerInterfaceProtocol
{

    override fun onVisibleBoundsChanged(visibleBounds: MapCoreSharedModule.MCRectCoord, zoom: Double) {
        delegate.onVisibleBoundsChanged((visibleBounds as MapCoreSharedModule.MCRectCoord).asKmp(), zoom)
    }

    override fun onRotationChanged(angle: Float) {
        delegate.onRotationChanged(angle)
    }

    override fun onMapInteraction() {
        delegate.onMapInteraction()
    }

    override fun onCameraChange(viewMatrix: List<*>, projectionMatrix: List<*>, origin: MapCoreSharedModule.MCVec3D, verticalFov: Float, horizontalFov: Float, width: Float, height: Float, focusPointAltitude: Float, focusPointPosition: MapCoreSharedModule.MCCoord, zoom: Float) {
        delegate.onCameraChange(ArrayList(((viewMatrix as? List<*>)?.map { (it as platform.Foundation.NSNumber).floatValue } ?: (0 until (viewMatrix as platform.Foundation.NSArray).count.toInt()).map { idx -> ((viewMatrix as platform.Foundation.NSArray).objectAtIndex(idx.toULong()) as platform.Foundation.NSNumber).floatValue })), ArrayList(((projectionMatrix as? List<*>)?.map { (it as platform.Foundation.NSNumber).floatValue } ?: (0 until (projectionMatrix as platform.Foundation.NSArray).count.toInt()).map { idx -> ((projectionMatrix as platform.Foundation.NSArray).objectAtIndex(idx.toULong()) as platform.Foundation.NSNumber).floatValue })), (origin as MapCoreSharedModule.MCVec3D).asKmp(), verticalFov, horizontalFov, width, height, focusPointAltitude, (focusPointPosition as MapCoreSharedModule.MCCoord).asKmp(), zoom)
    }
}

internal fun KMMapCameraListenerInterface.asPlatform(): MapCoreSharedModule.MCMapCameraListenerInterfaceProtocol = when (this) {
    is KMMapCameraListenerInterfacePlatformWrapper -> this.nativeHandle
    else -> KMMapCameraListenerInterfacePlatformProxy(this)
}
internal fun MapCoreSharedModule.MCMapCameraListenerInterfaceProtocol.asKmp(): KMMapCameraListenerInterface = KMMapCameraListenerInterfacePlatformWrapper(this)
